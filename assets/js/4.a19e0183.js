(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{462:function(s,t,n){s.exports=n.p+"assets/img/linux-start-1.71a598a1.png"},463:function(s,t,n){s.exports=n.p+"assets/img/linux-start-2.4475fa2f.png"},464:function(s,t,n){s.exports=n.p+"assets/img/linux-start-3.4c9c628d.png"},465:function(s,t,n){s.exports=n.p+"assets/img/linux-start-4.76ade959.png"},466:function(s,t,n){s.exports=n.p+"assets/img/linux-start-5.a47351fc.png"},467:function(s,t,n){s.exports=n.p+"assets/img/linux-start-6.4d5fb236.png"},542:function(s,t,n){"use strict";n.r(t);var a=n(55),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"linux-系统的启动过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#linux-系统的启动过程"}},[s._v("#")]),s._v(" Linux 系统的启动过程")]),s._v(" "),a("ul",[a("li",[s._v("内核的引导")]),s._v(" "),a("li",[s._v("运行 init")]),s._v(" "),a("li",[s._v("系统初始化")]),s._v(" "),a("li",[s._v("建立终端")]),s._v(" "),a("li",[s._v("用户登录系统")])]),s._v(" "),a("h2",{attrs:{id:"内核引导"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#内核引导"}},[s._v("#")]),s._v(" 内核引导")]),s._v(" "),a("p",[s._v("当计算机打开电源后，首先是 BOIS 开机自检， 按照 BOIS 的中设置的启动设备来启动\n操作系统首先进入 /boot")]),s._v(" "),a("p",[a("img",{attrs:{src:n(462),alt:"进入 /boot"}})]),s._v(" "),a("h2",{attrs:{id:"运行-init"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行-init"}},[s._v("#")]),s._v(" 运行 init")]),s._v(" "),a("p",[s._v("init 是所有进程的源头，首先读取的文件是 /etc/inittab")]),s._v(" "),a("p",[a("img",{attrs:{src:n(463),alt:"进入 /init"}})]),s._v(" "),a("h3",{attrs:{id:"运行级别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行级别"}},[s._v("#")]),s._v(" 运行级别")]),s._v(" "),a("p",[s._v("许多进程再开机的时候就启用，相当于 windows 的 service，在 linux 上叫做守护进程（daemon）")]),s._v(" "),a("p",[s._v("linux 在服务端需要在开机时启用 Apache，但是在个人用户端不需要，所以 linux 在启动时会分运行级别")]),s._v(" "),a("p",[a("img",{attrs:{src:n(464),alt:"进入 运行级别"}})]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),a("p",[s._v("linux 有七个运行级别：")]),s._v(" "),a("ol",[a("li",[s._v("级别0：停机状态")]),s._v(" "),a("li",[s._v("级别1：单用户工作状态，也就是在个人PC上使用的linux")]),s._v(" "),a("li",[s._v("级别2：多用户状态(没有NFS)")]),s._v(" "),a("li",[s._v("级别3：完全的多用户状态(有NFS)，登陆后进入控制台命令行模式")]),s._v(" "),a("li",[s._v("级别4：系统未使用，保留")]),s._v(" "),a("li",[s._v("级别5：X11控制台，登陆后进入图形GUI模式")]),s._v(" "),a("li",[s._v("级别6：系统正常关闭并重启，默认运行级别不能设为6，否则不能正常启动")])])]),s._v(" "),a("h2",{attrs:{id:"系统初始化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#系统初始化"}},[s._v("#")]),s._v(" 系统初始化")]),s._v(" "),a("p",[s._v("它主要完成的工作有：激活交换分区，检查磁盘，加载硬件模块以及其它一些需要优先执行任务")]),s._v(" "),a("p",[s._v("会在命令行执行："),a("code",[s._v("l5:5:wait:/etc/rc.d/rc 5")])]),s._v(" "),a("p",[a("img",{attrs:{src:n(465),alt:"进入 系统初始化"}})]),s._v(" "),a("h2",{attrs:{id:"建立终端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#建立终端"}},[s._v("#")]),s._v(" 建立终端")]),s._v(" "),a("p",[s._v("rc 执行完毕后会返回 init，这是系统环境基本配好，各种进程可以启动")]),s._v(" "),a("p",[s._v("init 接下来会打开6个终端")]),s._v(" "),a("div",{staticClass:"language-shell script line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(":2345:respawn:/sbin/mingetty tty1\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(":2345:respawn:/sbin/mingetty tty2\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(":2345:respawn:/sbin/mingetty tty3\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(":2345:respawn:/sbin/mingetty tty4\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(":2345:respawn:/sbin/mingetty tty5\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(":2345:respawn:/sbin/mingetty tty6\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h2",{attrs:{id:"用户登录系统"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#用户登录系统"}},[s._v("#")]),s._v(" 用户登录系统")]),s._v(" "),a("ol",[a("li",[s._v("命令行登录")]),s._v(" "),a("li",[s._v("ssh 登录")]),s._v(" "),a("li",[s._v("图形界面登录")])]),s._v(" "),a("p",[a("img",{attrs:{src:n(466),alt:"进入 登录系统"}})]),s._v(" "),a("p",[s._v("Linux 的账号验证程序是 login，login 会接收 mingetty 传来的用户名作为用户名参数")]),s._v(" "),a("p",[s._v("然后 login 会对用户名进行分析：如果用户名不是 root，且存在 /etc/nologin 文件，login 将输出 nologin 文件的内容，然后退出")]),s._v(" "),a("h3",{attrs:{id:"图形模式与文字模式的切换方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#图形模式与文字模式的切换方式"}},[s._v("#")]),s._v(" 图形模式与文字模式的切换方式")]),s._v(" "),a("p",[a("code",[s._v("Ctrl + Alt + F1 ~ F6")]),s._v(" 进入六个在 init 开启的终端，如果想返回图形界面，"),a("code",[s._v("Ctrl + Alt + F7")])]),s._v(" "),a("p",[a("img",{attrs:{src:n(467),alt:"进入 登录"}})]),s._v(" "),a("h2",{attrs:{id:"linux-关机"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#linux-关机"}},[s._v("#")]),s._v(" Linux 关机")]),s._v(" "),a("p",[s._v("在 linux 服务器上很少遇到关机的情景，但是在个人PC端还是要关机的")]),s._v(" "),a("p",[s._v("正确的关机流程为：sync > shutdown > reboot > halt")]),s._v(" "),a("div",{staticClass:"language-shell script line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sync")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将数据由内存同步到硬盘中")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("shutdown")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关机指令 man shutdown 来查看关机指令的帮助文档")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("shutdown")]),s._v(" –h "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" ‘This server will "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("shutdown")]),s._v(" after "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" mins’ "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这个命令告诉大家，计算机将在10分钟后关机，并且会显示在登陆用户的当前屏幕中。")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("shutdown")]),s._v(" –h now "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 立马关机")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("shutdown")]),s._v(" –h "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":25 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 系统会在今天20:25关机")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("shutdown")]),s._v(" –h +10 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 十分钟后关机")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("shutdown")]),s._v(" –r now "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 系统立马重启")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("shutdown")]),s._v(" –r +10 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 系统十分钟后重启")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("reboot")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 就是重启，等同于 shutdown –r now")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("halt")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关闭系统，等同于shutdown –h now 和 poweroff")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br")])]),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[s._v("危险")]),s._v(" "),a("p",[s._v("不管是重启系统还是关闭系统，首先要运行 sync 命令，把内存中的数据写到磁盘中")])]),s._v(" "),a("h2",{attrs:{id:"参考文章"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[s._v("#")]),s._v(" 参考文章")]),s._v(" "),a("p",[a("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2013/08/linux_boot_process.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("阮一峰的博客"),a("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=e.exports}}]);