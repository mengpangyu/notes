(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{544:function(t,s,a){"use strict";a.r(s);var n=a(55),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"node-js-buffer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#node-js-buffer"}},[t._v("#")]),t._v(" Node.js Buffer")]),t._v(" "),a("p",[t._v("因为作为一门后端语言，必须要用到文件的 IO，但是 JavaScript 没有一个关于二进制处理数据的 api")]),t._v(" "),a("p",[t._v("Node.js 推出了 Buffer 类来解决这类问题")]),t._v(" "),a("h2",{attrs:{id:"buffer-与字符编码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#buffer-与字符编码"}},[t._v("#")]),t._v(" Buffer 与字符编码")]),t._v(" "),a("p",[t._v("目前支持的字符编码：")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("ascii")]),t._v(" - 仅支持 7 位 ASCII 数据。如果设置去掉高位的话，这种编码是非常快的")]),t._v(" "),a("li",[a("strong",[t._v("utf8")]),t._v(" - 多字节编码的 Unicode 字符。许多网页和其他文档格式都使用 UTF-8")]),t._v(" "),a("li",[a("strong",[t._v("utf16le")]),t._v(" - 2 或 4 个字节，小字节序编码的 Unicode 字符。支持代理对（U+10000 至 U+10FFFF）")]),t._v(" "),a("li",[a("strong",[t._v("ucs2")]),t._v(" - utf16le 的别名")]),t._v(" "),a("li",[a("strong",[t._v("base64")]),t._v(" - Base64 编码")]),t._v(" "),a("li",[a("strong",[t._v("latin1")]),t._v(" - 一种把 Buffer 编码成一字节编码的字符串的方式")]),t._v(" "),a("li",[a("strong",[t._v("binary")]),t._v(" - latin1 的别名")]),t._v(" "),a("li",[a("strong",[t._v("hex")]),t._v(" - 将每个字节编码为两个十六进制字符")])]),t._v(" "),a("h2",{attrs:{id:"创建-buffer-类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建-buffer-类"}},[t._v("#")]),t._v(" 创建 Buffer 类")]),t._v(" "),a("ul",[a("li",[t._v("Buffer.alloc(size[, fill[, encoding]])： 返回一个指定大小的 Buffer 实例，如果没有设置 fill，则默认填满 0")]),t._v(" "),a("li",[t._v("Buffer.allocUnsafe(size)： 返回一个指定大小的 Buffer 实例，但是它不会被初始化，所以它可能包含敏感的数据")]),t._v(" "),a("li",[t._v("Buffer.allocUnsafeSlow(size)")]),t._v(" "),a("li",[t._v("Buffer.from(array)： 返回一个被 array 的值初始化的新的 Buffer 实例（传入的 array 的元素只能是数字，不然就会自动被 0 覆盖）")]),t._v(" "),a("li",[t._v("Buffer.from(arrayBuffer[, byteOffset[, length]])： 返回一个新建的与给定的 ArrayBuffer 共享同一内存的 Buffer。")]),t._v(" "),a("li",[t._v("Buffer.from(buffer)： 复制传入的 Buffer 实例的数据，并返回一个新的 Buffer 实例")]),t._v(" "),a("li",[t._v("Buffer.from(string[, encoding])： 返回一个被 string 的值初始化的新的 Buffer 实例")])]),t._v(" "),a("h2",{attrs:{id:"写入缓冲区"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#写入缓冲区"}},[t._v("#")]),t._v(" 写入缓冲区")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("buf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("string"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" offset"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" encoding"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("参数：")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("string")]),t._v(" - 写入缓冲区的字符串。")]),t._v(" "),a("li",[a("strong",[t._v("offset")]),t._v(" - 缓冲区开始写入的索引值，默认为 0")]),t._v(" "),a("li",[a("strong",[t._v("length")]),t._v(" - 写入的字节数，默认为 buffer.length")]),t._v(" "),a("li",[a("strong",[t._v("encoding")]),t._v(" - 使用的编码。默认为 'utf8'")])]),t._v(" "),a("h2",{attrs:{id:"从缓冲区读取数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#从缓冲区读取数据"}},[t._v("#")]),t._v(" 从缓冲区读取数据")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("buf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("encoding"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" start"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" end"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("参数：")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("encoding")]),t._v(" - 使用的编码。默认为 'utf8'")]),t._v(" "),a("li",[a("strong",[t._v("start")]),t._v(" - 指定开始读取的索引位置，默认为 0")]),t._v(" "),a("li",[a("strong",[t._v("end")]),t._v(" - 结束位置，默认为缓冲区的末尾")])]),t._v(" "),a("h2",{attrs:{id:"将-buffer-转换为-json-对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#将-buffer-转换为-json-对象"}},[t._v("#")]),t._v(" 将 Buffer 转换为 JSON 对象")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("buf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toJSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("当字符串化一个 Buffer 实例时，JSON.stringify() 会隐式地调用该 toJSON()")]),t._v(" "),a("h2",{attrs:{id:"缓冲区合并"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#缓冲区合并"}},[t._v("#")]),t._v(" 缓冲区合并")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("Buffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("concat")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" totalLength"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("参数：")]),t._v(" "),a("ul",[a("li",[t._v("list - 用于合并的 Buffer 对象数组列表")]),t._v(" "),a("li",[t._v("totalLength - 指定合并后Buffer对象的总长度")])]),t._v(" "),a("h2",{attrs:{id:"缓冲区比较"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#缓冲区比较"}},[t._v("#")]),t._v(" 缓冲区比较")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("buf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("compare")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("otherBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("参数：")]),t._v(" "),a("ul",[a("li",[t._v("otherBuffer - 与 buf 对象比较的另外一个 Buffer 对象")])]),t._v(" "),a("h2",{attrs:{id:"拷贝缓冲区"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#拷贝缓冲区"}},[t._v("#")]),t._v(" 拷贝缓冲区")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("buf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("copy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("targetBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" targetStart"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sourceStart"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sourceEnd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("参数：")]),t._v(" "),a("ul",[a("li",[t._v("targetBuffer - 要拷贝的 Buffer 对象。")]),t._v(" "),a("li",[t._v("targetStart - 数字, 可选, 默认: 0")]),t._v(" "),a("li",[t._v("sourceStart - 数字, 可选, 默认: 0")]),t._v(" "),a("li",[t._v("sourceEnd - 数字, 可选, 默认: buffer.length")])]),t._v(" "),a("h2",{attrs:{id:"缓冲区裁剪"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#缓冲区裁剪"}},[t._v("#")]),t._v(" 缓冲区裁剪")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("buf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("slice")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("start"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" end"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("参数：")]),t._v(" "),a("ul",[a("li",[t._v("start - 数字, 可选, 默认: 0")]),t._v(" "),a("li",[t._v("end - 数字, 可选, 默认: buffer.length")])]),t._v(" "),a("h2",{attrs:{id:"缓冲区长度"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#缓冲区长度"}},[t._v("#")]),t._v(" 缓冲区长度")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("buf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);